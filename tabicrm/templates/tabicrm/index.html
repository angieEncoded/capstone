{% extends "tabicrm/layout.html" %}
<!-- Weird that I had to do this here, it doesn't seem to inherit from the layout? -->
{% load static %}
{% load humanize %}
{% block body %}



<div class="container-fluid">
    <h2 class="text-center baskerville-font">Welcome to the TabiCRM Dashboard!</h2>

    <hr>
    <h3>Tickets in the queue:</h3>
    <table class="table table-striped table-responsive" id="ticketsTable">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Title</th>
                <th scope="col">Ticket Number</th>
                <th scope="col">Customer</th>
                <th scope="col">Opened</th>
                <th scope="col">Department</th>
                <th scope="col">Status</th>
                <th scope="col">Priority</th>
            </tr>
        </thead>
        <tbody>
            {% for openTicket in openTickets %}
            <tr class="select-customer" onclick="viewSingleTicketForm('{{openTicket.id}}')">
                <td>{{openTicket.title}}</td>
                <td>TT-{{openTicket.id}}</td>
                <td>{{openTicket.customer.name}}</td>
                <td>{{openTicket.created_on}}</td>
                <td>{{openTicket.assigned_to}}</td>
                <td>{{openTicket.status}}</td>
                <td>{{openTicket.priority}}</td>
            </tr>
            {% endfor%}
        </tbody>
    </table>
    <hr>
    <h3 class="mt-5">Tickets owned by you:</h3>
    <table class="table table-striped table-responsive" id="ticketsTable">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Title</th>
                <th scope="col">Ticket Number</th>
                <th scope="col">Customer</th>
                <th scope="col">Opened</th>
                <th scope="col">Department</th>
                <th scope="col">Status</th>
                <th scope="col">Priority</th>
            </tr>
        </thead>
        <tbody>
            {% for ownedTicket in ownedTickets %}
            <tr class="select-customer" onclick="viewSingleTicketForm('{{ownedTicket.id}}')">
                <td>{{ownedTicket.title}}</td>
                <td>TT-{{ownedTicket.id}}</td>
                <td>{{ownedTicket.customer.name}}</td>
                <td>{{ownedTicket.created_on}}</td>
                <td>{{ownedTicket.assigned_to}}</td>
                <td>{{ownedTicket.status}}</td>
                <td>{{ownedTicket.priority}}</td>
            </tr>
            {% endfor%}
        </tbody>
    </table>


</div>



{% endblock %}